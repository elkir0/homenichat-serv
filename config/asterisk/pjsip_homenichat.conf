; Homenichat PJSIP WebRTC Configuration
; Include this file in pjsip.conf: #include pjsip_homenichat.conf

; Transport WSS (WebSocket Secure)
[transport-wss]
type=transport
protocol=wss
bind=0.0.0.0:8089
cert_file=/etc/asterisk/keys/asterisk.pem
priv_key_file=/etc/asterisk/keys/asterisk.key
method=tlsv1_2

; Transport WS (WebSocket non-SSL for local testing)
[transport-ws]
type=transport
protocol=ws
bind=0.0.0.0:8088

; Transport UDP (for classic SIP clients like Groundwire, Zoiper)
[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0:5060

; Template for WebRTC extensions
; Codec priority for GSM modem compatibility:
; g722 (16kHz) first - good quality, Asterisk transcodes natively
; ulaw/alaw (8kHz) fallback - universal compatibility
; NOTE: opus excluded by default - requires codec_opus.so transcoder
; which is NOT included in standard Asterisk builds. Without it,
; Asterisk can negotiate Opus but CANNOT transcode to/from ulaw/g722,
; causing silent calls when bridging WebRTC to GSM modems.
[webrtc-endpoint](!)
type=endpoint
context=from-internal
disallow=all
allow=g722
allow=ulaw
allow=alaw
transport=transport-ws
webrtc=yes
dtls_auto_generate_cert=yes
ice_support=yes
media_encryption=dtls
media_use_received_transport=yes
rtcp_mux=yes
direct_media=no

; Extensions will be auto-created by Homenichat AMI service
; Example:
; [1000](webrtc-endpoint)
; auth=auth_1000
; aors=1000
; callerid="User 1000" <1000>
;
; [auth_1000]
; type=auth
; auth_type=userpass
; username=1000
; password=auto-generated
;
; [1000]
; type=aor
; max_contacts=5
; remove_existing=yes
; qualify_frequency=30
