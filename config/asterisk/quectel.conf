; Homenichat chan_quectel Configuration
; Template for SIM7600/EC25 GSM modems
;
; IMPORTANT: This config includes audio gain settings optimized for SIM7600
; to prevent TX (uplink/microphone) audio saturation.
;
; Copy this file to /etc/asterisk/quectel.conf and adjust device paths

[general]
interval=15                    ; Status check interval (seconds)
smsdb=/var/lib/asterisk/smsdb  ; SMS database directory
csmsttl=600                    ; Concatenated SMS TTL

[defaults]
context=from-gsm               ; Default dialplan context for incoming calls
group=0                        ; Device group

; =====================================================
; AUDIO GAIN SETTINGS - Critical for SIM7600 to avoid saturation
; =====================================================
; rxgain: Volume from GSM network to Asterisk (speaker/RX)
;   Range: -6 to +6 dB, negative = quieter
;   Default: -5 (prevents clipping on loud callers)
rxgain=-5

; txgain: Volume from Asterisk to GSM network (microphone/TX)
;   Range: -6 to +6 dB, negative = quieter
;   Default: -15 (CRITICAL: prevents saturation on SIM7600)
;   If still saturated, try -18 or -20
txgain=-15

; Additional AT commands applied at modem init (see below in [modem-X])
; AT+CMICGAIN=0     ; Microphone gain minimum (0-7)
; AT+CTXVOL=0x0200  ; TX volume reduced (hex value)
; AT+COUTGAIN=5     ; Speaker gain (0-5)

; =====================================================
; SMS Settings
; =====================================================
autodeletesms=yes              ; Delete SMS after processing
resetquectel=yes               ; Reset modem on critical errors
msg_storage=me                 ; Store SMS in modem memory (not SIM)
msg_direct=off                 ; Use storage mode (direct mode unreliable)

; =====================================================
; MODEM DEFINITIONS
; =====================================================
; Uncomment and configure the modems you have
; Use 'dmesg | grep ttyUSB' to find device paths
; Use udev rules for persistent symlinks (recommended)

;[modem-1]
;data=/dev/ttyUSB2              ; AT command port (usually .2 interface)
;audio=/dev/ttyUSB4             ; Audio/PCM port (usually .4 interface)
;context=from-gsm               ; Dialplan context for this modem
;slin16=yes                     ; Use 16kHz audio (required for SIM7600)
;txgain=-15                     ; Override default if needed
;imsi=340090000000000           ; Optional: identify by SIM IMSI

;[modem-2]
;data=/dev/ttyUSB7
;audio=/dev/ttyUSB9
;context=from-gsm
;slin16=yes

; =====================================================
; EXAMPLE: Using udev symlinks (recommended)
; =====================================================
; Create /etc/udev/rules.d/99-gsm-modems.rules:
;
; # Modem 1 on USB port 2-1
; SUBSYSTEM=="tty", KERNELS=="2-1:1.2", SYMLINK+="gsm-modem1-at"
; SUBSYSTEM=="tty", KERNELS=="2-1:1.4", SYMLINK+="gsm-modem1-audio"
;
; Then use:
; data=/dev/gsm-modem1-at
; audio=/dev/gsm-modem1-audio
