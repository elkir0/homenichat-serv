services:
  homenichat-serv:
    build: .
    container_name: homenichat-serv
    restart: unless-stopped
    ports:
      - "${FRONTEND_PORT:-8080}:80"
      - "3001:3001"
    environment:
      - NODE_ENV=production
      - PORT=3001
      - JWT_SECRET=homenichatSecretKey2026
      # SMS Bridge - OBLIGATOIRE pour les SMS
      - PWA_API_TOKEN=njSm4xHAbYF3UnBe2Rv69aClBYFwmlWH5_zy8gQNnzQ
      - SMS_BRIDGE_URL=
      # Evolution API (optionnel)
      - EVOLUTION_API_URL=
      - EVOLUTION_API_KEY=
      - INSTANCE_NAME=homenichat
      # Configuration VoIP - FreePBX WebRTC
      - VOIP_SIP_SERVER=
      - VOIP_DOMAIN=
      - VOIP_USER=
      - VOIP_PASSWORD=
      # Configuration AMI - Asterisk/FreePBX (appels entrants)
      - AMI_ENABLED=true
      - AMI_DEBUG=false
      - AMI_HOST=127.0.0.1
      - AMI_PORT=5038
      - AMI_USERNAME=homenichat
      - AMI_PASSWORD=
    volumes:
      - ./data:/app/data
      - ./backend/sessions:/app/backend/sessions
